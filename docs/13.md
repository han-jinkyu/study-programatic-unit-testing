# 13. 까다로운 테스트

## 멀티스레드 코드 테스트

- 동작하는 `동시성(concurrent) 코드`를 작성하는 것은 어렵다.
  - 동시성이 필요한 애플레케이션 코드를 테스트하는 것은 `기술적 단위 테스트 영역이 아니다`.
  - `통합 테스트(integration testing)로 분류`하는 것이 낫다.
- 스레드를 사용하는 코드에 대한 테스트는 느린 경향이 있다.
  - 스레드에 관한 결함은 한참 후에 등장하기도 한다.

### 단순하고 똑똑하게 유지

- 멀티스레드 코드를 테스트할 때는 다음 주요 주제를 따른다.
  - 스레드 통제와 애플리케이션 코드 사이의 중첩을 최소화한다.
    - 최대한 스레드 없이 단위 테스트를 할 수 있게 설계를 변경한다.
  - 다른 사람의 작업을 믿는다.
    - 자바 5에 Doug Lea가 만든 동시성 유틸리티는 충분히 검증 받았다.
    - 생산자/소비자 문제는 BlockingQueue 클래스를 사용하자.

---
[Home](../README.md)
